## Java Performance: For-looping vs. Streaming

### Проблема
* Как итерировать?
* Является ли подсчет вверх или вниз в цикле for наиболее эффективным способом итерации? 

#### Производительность итерации
Существует много мнений как итерировать с максимальной поизводительностью:
* идиома прямого отсчета - цикл for, начинающийся с нуля, а затем считающий до некоторого заранее определенного числа;
* идиома обратного отсчета  - цикл for, начинающийся c заранее определенного неотрицательного значения, а затем начинает обратный отсчет;
  * существует мнение, что проверка того, как значение относятся к нулю более эффективно, чем проверка относительно любого другого значения, 
т.к. у всех CPU есть специальная интсрукция машинного кода, которая может проверить как данное значение относится к нулю.
  *  переменная цикла проверяется только один раз (значение одновременно проверяется и уменьшается).
* математический подход - сумма последовательных чисел, начинающихся с нуля, равна N * (N + 1) / 2, где N - наибольшее число в ряду.
  
#### Результаты
* Для некоторых может оказаться неожиданностью, что потоковое решение является самым быстрым, хотя и с запасом, который находится в пределах погрешности.
* Современный JIT-компилятор одинаково хорошо оптимизирует прямой и обратный отсчет
  * Возможно результаты были бы разные , если бы код работал в режими интерепретации.
* Чистая математика дает 1000-кратный прирост производительности. 
  * Чем больше итераций, тем больше выигрыш => "Хитрость иногда превосходит грубую силу".
* На некоторых широко используемых аппаратных средствах/JVM не имеет никакого значения, будем ли мы выполнять итерацию вверх или вниз в наших циклах for. 
  * Более современные JVM способны оптимизировать потоковые итерации, поэтому они имеют эквивалентную или даже лучшую производительность, чем циклы for.
  * Потоковый код, как правило, более читабелен по сравнению с циклами for, и вероятно, будет де-факто итерацией в будущем.